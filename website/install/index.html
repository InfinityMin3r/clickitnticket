#!/bin/sh

move_dir(){
		cd ticket
}

run_script() {
RELEASE="0.1"

exec 1>&2
echo "Installer Launched..."
echo "Installing Node..."

#install node
curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash - #>/dev/null 2>&1
sudo apt-get install -y nodejs #>/dev/null 2>&1

echo "Installing NPM..."
#install npm
sudo npm install -g npm #>/dev/null 2>&1
sudo apt-get install -y node-gyp #>/dev/null 2>&1

echo "Installing Meteor..."
#install Meteor
curl https://install.meteor.com/ | sh 
meteor create ticket

echo "Grabbing Code..."
#grab code
apt-get install -y unzip #>/dev/null 2>&1

move_dir
#wget https://clickitn.tk/install/tickets.zip
curl --progress-bar --fail ==continue-at - \ 
"localhost/install/tickets.zip" --output "localhost/install/tickets.zip"
unzip tickets.zip #>/dev/null 2>&1
rm tickets.zip #>/dev/null 2>&1

echo "Running last commands..."

meteor npm install #>/dev/null 2>&1

echo "Installed Meteor! Just go into your new ticket directory and type meteor to start!"


exit 1;
}
run_script
